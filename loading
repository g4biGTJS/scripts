local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")

local player = Players.LocalPlayer
local gui = Instance.new("ScreenGui")
gui.Name = "OliveHubLoading"
gui.IgnoreGuiInset = true
gui.ResetOnSpawn = false
gui.Parent = player:WaitForChild("PlayerGui")

-- Game detection
local gameTitles = {
    [126884695634066] = "GROW A GARDEN",
    [109983668079237] = "STEAL A BRAINROT",
    [79546208627805] = "99 NIGHTS IN THE FOREST"
}

local currentGameId = game.PlaceId
local gameTitle = gameTitles[currentGameId] or "OLIVE HUB"

-- Background frame (full screen)
local background = Instance.new("Frame")
background.Name = "Background"
background.Size = UDim2.new(1, 0, 1, 0)
background.BackgroundColor3 = Color3.fromRGB(10, 10, 15)
background.BackgroundTransparency = 1
background.Parent = gui

-- Modern gradient effect (full screen)
local gradient = Instance.new("UIGradient")
gradient.Rotation = 45
gradient.Color = ColorSequence.new({
    ColorSequenceKeypoint.new(0, Color3.fromRGB(15, 15, 25)),
    ColorSequenceKeypoint.new(0.5, Color3.fromRGB(25, 15, 35)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(35, 25, 45))
})
gradient.Parent = background

-- Main container (centered but full width)
local mainContainer = Instance.new("Frame")
mainContainer.Name = "MainContainer"
mainContainer.AnchorPoint = Vector2.new(0.5, 0.5)
mainContainer.Position = UDim2.new(0.5, 0, 0.5, 0)
mainContainer.Size = UDim2.new(1, 0, 0.4, 0) -- Full width
mainContainer.BackgroundTransparency = 1
mainContainer.Parent = background

-- Logo container
local logoContainer = Instance.new("Frame")
logoContainer.Name = "LogoContainer"
logoContainer.Size = UDim2.new(1, 0, 0.4, 0)
logoContainer.Position = UDim2.new(0, 0, 0.1, 0)
logoContainer.BackgroundTransparency = 1
logoContainer.Parent = mainContainer

-- OLIVE HUB text (centered)
local letters = {"O", "L", "I", "V", "E", " ", "H", "U", "B"}
local letterFrames = {}
local totalWidth = 0.6 -- Total width for all letters
local letterSpacing = totalWidth / #letters
local startPosition = 0.5 - (totalWidth / 2) -- Center the entire text block

for i, letter in ipairs(letters) do
    local letterFrame = Instance.new("TextLabel")
    letterFrame.Name = letter == " " and "Space" or letter
    letterFrame.Size = UDim2.new(letterSpacing, 0, 1, 0)
    letterFrame.Position = UDim2.new(startPosition + (i-1)*letterSpacing + letterSpacing/2, 0, 0.5, 0)
    letterFrame.AnchorPoint = Vector2.new(0.5, 0.5)
    letterFrame.BackgroundTransparency = 1
    letterFrame.Text = letter
    letterFrame.TextColor3 = Color3.fromRGB(255, 255, 255)
    letterFrame.Font = Enum.Font.GothamBold
    letterFrame.TextSize = 0
    letterFrame.TextTransparency = 1
    letterFrame.TextStrokeTransparency = 0.8
    letterFrame.TextStrokeColor3 = Color3.fromRGB(100, 50, 200)
    letterFrame.Parent = logoContainer
    table.insert(letterFrames, letterFrame)
end

-- Subtitle container
local subtitleContainer = Instance.new("Frame")
subtitleContainer.Name = "SubtitleContainer"
subtitleContainer.Size = UDim2.new(1, 0, 0.15, 0)
subtitleContainer.Position = UDim2.new(0, 0, 0.55, 0)
subtitleContainer.BackgroundTransparency = 1
subtitleContainer.Parent = mainContainer

-- Game title text (centered like OLIVE HUB)
local gameTitleLetters = {}
for letter in gameTitle:gmatch(".") do
    table.insert(gameTitleLetters, letter)
end

local gameTitleFrames = {}
local gameTitleTotalWidth = 0.8
local gameTitleSpacing = gameTitleTotalWidth / #gameTitleLetters
local gameTitleStartPosition = 0.5 - (gameTitleTotalWidth / 2)

for i, letter in ipairs(gameTitleLetters) do
    local letterFrame = Instance.new("TextLabel")
    letterFrame.Name = letter == " " and "Space" .. i or letter .. i
    letterFrame.Size = UDim2.new(gameTitleSpacing, 0, 1, 0)
    letterFrame.Position = UDim2.new(gameTitleStartPosition + (i-1)*gameTitleSpacing + gameTitleSpacing/2, 0, 0.5, 0)
    letterFrame.AnchorPoint = Vector2.new(0.5, 0.5)
    letterFrame.BackgroundTransparency = 1
    letterFrame.Text = letter
    letterFrame.TextColor3 = Color3.fromRGB(140, 120, 180)
    letterFrame.Font = Enum.Font.GothamMedium
    letterFrame.TextSize = 0
    letterFrame.TextTransparency = 1
    letterFrame.TextStrokeTransparency = 0.9
    letterFrame.TextStrokeColor3 = Color3.fromRGB(80, 150, 120)
    letterFrame.Parent = subtitleContainer
    table.insert(gameTitleFrames, letterFrame)
end

-- Loading bar container (original width)
local loadingContainer = Instance.new("Frame")
loadingContainer.Name = "LoadingContainer"
loadingContainer.Size = UDim2.new(0.6, 0, 0.08, 0) -- Original width
loadingContainer.Position = UDim2.new(0.2, 0, 0.85, 0) -- Original position
loadingContainer.BackgroundTransparency = 1
loadingContainer.Parent = mainContainer

-- Loading bar background
local loadingBg = Instance.new("Frame")
loadingBg.Name = "LoadingBackground"
loadingBg.Size = UDim2.new(1, 0, 0.3, 0)
loadingBg.Position = UDim2.new(0, 0, 0.35, 0)
loadingBg.BackgroundColor3 = Color3.fromRGB(30, 25, 40)
loadingBg.BorderSizePixel = 0
loadingBg.Parent = loadingContainer

local loadingBgCorner = Instance.new("UICorner")
loadingBgCorner.CornerRadius = UDim.new(0, 6)
loadingBgCorner.Parent = loadingBg

-- Subtle inner shadow for loading bg
local bgGradient = Instance.new("UIGradient")
bgGradient.Rotation = 90
bgGradient.Color = ColorSequence.new({
    ColorSequenceKeypoint.new(0, Color3.fromRGB(35, 30, 45)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(25, 20, 35))
})
bgGradient.Parent = loadingBg

-- Loading bar fill
local loadingFill = Instance.new("Frame")
loadingFill.Name = "LoadingFill"
loadingFill.Size = UDim2.new(0, 0, 1, 0)
loadingFill.Position = UDim2.new(0, 0, 0, 0)
loadingFill.BackgroundColor3 = Color3.fromRGB(120, 80, 160)
loadingFill.BorderSizePixel = 0
loadingFill.Parent = loadingBg

local fillCorner = Instance.new("UICorner")
fillCorner.CornerRadius = UDim.new(0, 6)
fillCorner.Parent = loadingFill

local fillGradient = Instance.new("UIGradient")
fillGradient.Color = ColorSequence.new({
    ColorSequenceKeypoint.new(0, Color3.fromRGB(100, 70, 140)),
    ColorSequenceKeypoint.new(0.5, Color3.fromRGB(130, 90, 170)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(110, 80, 150))
})
fillGradient.Parent = loadingFill

-- Loading text
local loadingText = Instance.new("TextLabel")
loadingText.Name = "LoadingText"
loadingText.Size = UDim2.new(1, 0, 0.4, 0)
loadingText.Position = UDim2.new(0, 0, 0.8, 0)
loadingText.BackgroundTransparency = 1
loadingText.Text = "Loading..."
loadingText.TextColor3 = Color3.fromRGB(120, 100, 140)
loadingText.Font = Enum.Font.Gotham
loadingText.TextSize = 16
loadingText.TextTransparency = 1
loadingText.Parent = loadingContainer

-- Animation functions
local function animateIn()
    -- Background fade in (full screen)
    TweenService:Create(background, TweenInfo.new(0.5), {BackgroundTransparency = 0}):Play()
    
    -- Animate main letters
    for i, frame in ipairs(letterFrames) do
        local delay = i * 0.1
        
        coroutine.wrap(function()
            wait(delay)
            
            -- Scale and fade in
            local scaleTween = TweenService:Create(frame, TweenInfo.new(0.6, Enum.EasingStyle.Back, Enum.EasingDirection.Out), {TextSize = 48})
            local fadeTween = TweenService:Create(frame, TweenInfo.new(0.6), {TextTransparency = 0})
            
            scaleTween:Play()
            fadeTween:Play()
            
            -- Color animation
            wait(0.3)
            TweenService:Create(frame, TweenInfo.new(0.5), {
                TextColor3 = Color3.fromRGB(150, 100, 255)
            }):Play()
        end)()
    end
    
    -- Animate game title
    wait(#letters * 0.1 + 0.5)
    for i, frame in ipairs(gameTitleFrames) do
        local delay = i * 0.05
        
        coroutine.wrap(function()
            wait(delay)
            TweenService:Create(frame, TweenInfo.new(0.4, Enum.EasingStyle.Quad), {
                TextSize = 16,
                TextTransparency = 0
            }):Play()
        end)()
    end
    
    -- Show loading elements
    wait(0.8)
    TweenService:Create(loadingText, TweenInfo.new(0.5), {TextTransparency = 0}):Play()
    
    -- Animate loading bar (full width)
    TweenService:Create(loadingFill, TweenInfo.new(3.5, Enum.EasingStyle.Quad), {Size = UDim2.new(1, 0, 1, 0)}):Play()
    
    -- Loading text animation
    local loadingTexts = {"Loading.", "Loading..", "Loading..."}
    for i = 1, 12 do
        wait(0.3)
        loadingText.Text = loadingTexts[((i-1) % 3) + 1]
    end
end

local function animateOut()
    -- Fade out loading elements
    TweenService:Create(loadingText, TweenInfo.new(0.3), {TextTransparency = 1}):Play()
    TweenService:Create(loadingContainer, TweenInfo.new(0.5), {Size = UDim2.new(0, 0, 0.08, 0)}):Play()
    
    -- Fade out game title
    for i, frame in ipairs(gameTitleFrames) do
        local delay = (#gameTitleFrames - i) * 0.03
        
        coroutine.wrap(function()
            wait(delay)
            TweenService:Create(frame, TweenInfo.new(0.3), {
                TextSize = 0,
                TextTransparency = 1
            }):Play()
        end)()
    end
    
    -- Fade out main letters
    wait(0.5)
    for i, frame in ipairs(letterFrames) do
        local delay = (#letters - i) * 0.08
        
        coroutine.wrap(function()
            wait(delay)
            TweenService:Create(frame, TweenInfo.new(0.4), {
                TextSize = 0,
                TextTransparency = 1
            }):Play()
        end)()
    end
    
    -- Background fade out (full screen)
    wait(1)
    TweenService:Create(background, TweenInfo.new(0.8), {BackgroundTransparency = 1}):Play()
    
    -- Remove GUI
    wait(1)
    gui:Destroy()
end

-- Start animation sequence
animateIn()
wait(4.5)
animateOut()
